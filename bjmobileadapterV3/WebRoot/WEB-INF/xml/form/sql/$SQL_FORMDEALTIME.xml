<?xml version="1.0" encoding="GB2312"?>
<sql-group>
	<doc>
		<author>duanximeng</author>
		<date>2007-07-14</date>
		<description>工单处理/受理时长统计</description>
	</doc>
	
	<!-- 部门统计 -->
	<!--工单类型-->
		<sql name="formdealtimepage" datasource="Ultranms">
		<item dbms="All"><![CDATA[
select t.c650000001,t.c650000002 from {100} t
        
		]]></item>
	</sql>
			<sql name="formdealtime.centervalue" datasource="Ultranms">
		<item dbms="All"><![CDATA[
select g.c1,
       baseinfo.c700000001 || trim('{20}总数'),
       count(distinct baseinfo.c1)
  from {500} baseinfo, {400} pro, {200} g, {300} gu, {100} u
 where baseinfo.c700000000 = pro.c700020001
   and baseinfo.c700000001 = pro.c700020002
   and pro.c700020010 = u.C630000001
   and u.C1 = gu.C620000028
   and g.C1 = gu.C620000027 {3} {4} {5} {10}
 group by g.c1, baseinfo.c700000001
union all
select g.c1,
       baseinfo.c700000001 || trim('平均{20}时长(分)'),
       {30}
  from {500} baseinfo, {400} pro, {200} g, {300} gu, {100} u
 where baseinfo.c700000000 = pro.c700020001
   and baseinfo.c700000001 = pro.c700020002
   and pro.c700020010 = u.C630000001
   and u.C1 = gu.C620000028
   and g.C1 = gu.C620000027 {3} {4} {5} {10}
 group by g.c1, baseinfo.c700000001
		]]></item>
	</sql>
	
		<sql name="formdealtime.left" datasource="Ultranms">
		<item dbms="All"><![CDATA[
select distinct g.c630000018 as {20}部门, g.c1 from {200} g where 1 = 1 {4}

		]]></item>
	</sql>
	
			<sql name="formdealtime.top" datasource="Ultranms">
		<item dbms="All"><![CDATA[
select basecatagory.c650000002 || t.typevalue,
       basecatagory.c650000001,
       t.typevalue,
       basecatagory.c650000002
  from {600} basecatagory,
       (select trim('{20}总数') as typevalue
          from dual
        union all
        select trim('平均{20}时长(分)') as typevalue from dual) t
 where 1 = 1 {1}
 order by basecatagory.c650000002
		]]></item>
	</sql>
	
	
	<!-- 人员统计 -->
	<sql name="formdealtimeuser.centervalue" datasource="Ultranms">
		<item dbms="All"><![CDATA[
select u.c630000001,
       baseinfo.c700000001 || trim('{20}总数'),
       count(distinct baseinfo.c1)
  from {500} baseinfo, {400} pro, {100} u
 where baseinfo.c700000000 = pro.c700020001
   and baseinfo.c700000001 = pro.c700020002
   and pro.c700020010 = u.C630000001 {3} {5} {8} {10}
 group by u.c630000001, baseinfo.c700000001
union all
select u.c630000001,
       baseinfo.c700000001 || trim('平均{20}时长(分)'),
       {30}
  from {500} baseinfo, {400} pro, {100} u
 where baseinfo.c700000000 = pro.c700020001
   and baseinfo.c700000001 = pro.c700020002
   and pro.c700020010 = u.C630000001 {3} {5} {8} {10}
 group by u.c630000001, baseinfo.c700000001   
		]]></item>
	</sql>
	
		<sql name="formdealtimeuser.left" datasource="Ultranms">
		<item dbms="All"><![CDATA[
select u.c630000003 as {20}人,u.c630000001 from {100} u where 1=1 {8}
		]]></item>
	</sql>
	
	<sql name="formdealtimeuser.top" datasource="Ultranms">
		<item dbms="All"><![CDATA[
select basecatagory.c650000002 || t.typevalue,
       basecatagory.c650000001,
       t.typevalue,
       basecatagory.c650000002
  from {600} basecatagory,
       (select trim('{20}总数') as typevalue
          from dual
        union all
        select trim('平均{20}时长(分)') as typevalue from dual) t
 where 1 = 1 {1}
 order by basecatagory.c650000002
		]]></item>
	</sql>
</sql-group>

