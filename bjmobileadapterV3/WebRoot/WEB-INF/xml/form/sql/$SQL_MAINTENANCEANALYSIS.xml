<?xml version="1.0" encoding="GB2312"?>
<sql-group>
	<doc>
		<author>shenchuan</author>
		<date>2008-07-04</date>
		<description>维护能力分析月报</description>
	</doc>
	<sql name="maintenanceanalysispage.group" datasource="Ultranms">
		<item dbms="All"><![CDATA[

			select t.groupname from (
			select g.c630000018 groupname  from {100} g where g.c630000021='2' and g.c630000020='000000000600001' and g.c630000027='1'
			union all 
			select trim('网管中心') groupname from dual
			) t 
		]]></item>
	</sql>
	<sql name="maintenanceanalysis.left" datasource="Ultranms">
		<item dbms="All"><![CDATA[

			select ' ',t.groupname as 公司 from (
			select g.c630000018 groupname  from {100} g where g.c630000021='2' and g.c630000020='000000000600001' and g.c630000027='1'
			union all 
			select trim('网管中心') groupname from dual
			) t where 1=1 {1}
			union all 
			select  ' ', trim('各项合计') groupname from dual
		]]></item>
	</sql>
	

		<sql name="maintenanceanalysis.colTitle" datasource="Ultranms">
		<item dbms="All"><![CDATA[
					select trim('故障处理能力线路') 
					  from dual
					union all
					select trim('故障处理能力传输设备')
					  from dual
					union all
					select trim('故障处理能力传输连接件') 
					  from dual
					union all
					select trim('故障处理能力网管系统') 
					  from dual
				     union all
					select trim('故障处理能力电源')   
					from dual
					union all
					select trim('故障处理能力网内故障平均处理时长(小时/次)') 
					  from dual
					  union all
					select trim('故障处理能力网内故障处理及时率') 
					  from dual
					  union all
					select trim('线路维护能力一干') 
					  from dual
					  union all
					select trim('线路维护能力二干') 
					  from dual
					  union all
					select trim('线路维护能力城域核心') 
					  from dual
					  union all
					select trim('线路维护能力城域接入') 
					  from dual
					  union all
					select trim('线路维护能力千公里阻断时长均值') 
					  from dual
					  union all
					select trim('线路维护能力千公里故障次数') 
					  from dual
					  union all
					  select trim('维护支撑能力线路') 
					  from dual
					union all
					select trim('维护支撑能力传输设备')
					  from dual
					union all
					select trim('维护支撑能力传输连接件') 
					  from dual
					union all
					select trim('维护支撑能力网管系统') 
					  from dual
				     union all
					select trim('维护支撑能力电源')   
					from dual
					union all
					select trim('维护支撑能力网内故障率合计(次/万2M)') 
					  from dual
					  union all
					select trim('维护支撑能力电路调度及时率') 
					  from dual
					  union all
					select trim('维护支撑能力人员效率(2M/人)') 
					  from dual
					  union all
					select trim('维护支撑能力重大故障(次)') 
					  from dual
					  union all
					select trim('维护支撑能力网管可用率') 
					  from dual
					  
		]]></item>
	</sql>
		<sql name="maintenanceanalysis.centervalue" datasource="Ultranms">
		<item dbms="All"><![CDATA[

				select trim('故障处理能力线路'), a.所属城市,
				(case when b.网络故障数据_线路>0 then round(a.故障影响数据_线路/b.网络故障数据_线路,1)  else 0 end ) 
				from 
				(
				select t.c802000002 as 所属城市,nvl(sum(t.c802000004),0) as 故障影响数据_线路  from {300} t where 1=1 {5} group by t.c802000002
				) a,
				(
				select t.c802000002 as 所属城市,nvl(sum(t.c802000013),0) as 网络故障数据_线路 from {200} t where 1=1 {5} group by t.c802000002
				) b
				where a.所属城市=b.所属城市 
				union all
				select trim('故障处理能力传输设备'), a.所属城市,
				(case when b.网络故障_传输设备>0 then round(a.故障影响_传输设备/b.网络故障_传输设备,1)  else 0 end ) 
				from 
				(
				select t.c802000002 as 所属城市,nvl(sum(t.c802000005),0) as 故障影响_传输设备  from {300} t where 1=1 {5} group by t.c802000002
				) a,
				(
				select t.c802000002 as 所属城市,nvl(sum(t.c802000015),0) as 网络故障_传输设备 from {200} t where 1=1 {5} group by t.c802000002
				) b
				where a.所属城市=b.所属城市
				union all
				select trim('故障处理能力传输连接件'), a.所属城市,
				(case when b.网络故障_传输连接件>0 then round(a.故障影响_传输连接件/b.网络故障_传输连接件,1)  else 0 end ) 
				from 
				(
				select t.c802000002 as 所属城市,nvl(sum(t.c802000006),0) as 故障影响_传输连接件  from {300} t where 1=1 {5} group by t.c802000002
				) a,
				(
				select t.c802000002 as 所属城市,nvl(sum(t.c802000026),0) as 网络故障_传输连接件 from {200} t where 1=1 {5} group by t.c802000002
				) b
				where a.所属城市=b.所属城市
				union all
				select trim('故障处理能力网管系统'), a.所属城市,
				(case when b.网络故障_网管系统>0 then round(a.故障影响_网管系统/b.网络故障_网管系统,1)  else 0 end )
				from 
				(
				select t.c802000002 as 所属城市,nvl(sum(t.c802000007),0) as 故障影响_网管系统  from {300} t where 1=1 {5} group by t.c802000002
				) a,
				(
				select t.c802000002 as 所属城市,nvl(sum(t.c802000040),0) as 网络故障_网管系统 from {200} t where 1=1 {5} group by t.c802000002
				) b
				where a.所属城市=b.所属城市
				union all
				select trim('故障处理能力电源'), a.所属城市,
				(case when b.网络故障_电源>0 then round(a.故障影响_电源/b.网络故障_电源,1)  else 0 end )
				from
				(
				select t.c802000002 as 所属城市,nvl(sum(t.c802000008),0) as 故障影响_电源  from {300} t where 1=1 {5} group by t.c802000002
				) a,
				(
				select t.c802000002 as 所属城市,nvl(sum(t.c536870933),0) as 网络故障_电源 from {200} t where 1=1 {5} group by t.c802000002
				) b
				where a.所属城市=b.所属城市
				union all
				select trim('故障处理能力网内故障平均处理时长(小时/次)'), a.所属城市,
				(case when b.网络故障报表>0 then round(a.故障影响报表/b.网络故障报表,1)  else 0 end )
				from
				(
				select t.c802000002 as 所属城市,nvl(sum(t.c802000022-t.c802000008),0) as 故障影响报表  from {300} t where 1=1 {5} group by t.c802000002
				) a,
				(
				select t.c802000002 as 所属城市,nvl(sum(t.c802000013)+sum(t.c802000015)+sum(t.c802000026)+sum(t.c802000040),0) as 网络故障报表 from {200} t where 1=1 {5} group by t.c802000002
				) b
				where a.所属城市=b.所属城市
				union all
				select trim('故障处理能力网内故障处理及时率'), a.所属城市,
				(case when b.网络故障报表>0 then round((1-a.故障影响报表/b.网络故障报表)*100,1)   else 0 end )
				from
				(
				select t.c802000002 as 所属城市,nvl(sum(t.c802000035),0) as 故障影响报表  from {400} t where 1=1 {5} group by t.c802000002
				) a,
				(
				select t.c802000002 as 所属城市,nvl(sum(t.c802000013)+sum(t.c802000015)+sum(t.c802000026)+sum(t.c802000040),0) as 网络故障报表 from {200} t where 1=1 {5} group by t.c802000002
				) b
				where a.所属城市=b.所属城市
				union all
				select trim('线路维护能力一干'), a.所属城市,
				(case when b.网络故障报表>0 then round(a.故障影响报表/b.网络故障报表*1000,1)   else 0 end )
				from
				(
				select t.c802000002 as 所属城市,nvl(sum(t.c802000009),0) as 故障影响报表  from {300} t where 1=1 {5} group by t.c802000002
				) a,
				(
				select t.c802000002 as 所属城市,nvl(sum(t.c802000033),0) as 网络故障报表 from {100} t where 1=1 {5} group by t.c802000002
				) b
				where a.所属城市=b.所属城市
				union all
				select trim('线路维护能力二干'), a.所属城市,
				(case when b.网络故障报表>0 then round(a.故障影响报表/b.网络故障报表*1000,1)   else 0 end )
				from
				(
				select t.c802000002 as 所属城市,nvl(sum(t.c802000010),0) as 故障影响报表  from {300} t where 1=1 {5} group by t.c802000002
				) a,
				(
				select t.c802000002 as 所属城市,nvl(sum(t.c802000035),0) as 网络故障报表 from {100} t where 1=1 {5} group by t.c802000002
				) b
				where a.所属城市=b.所属城市
				union all
				select trim('线路维护能力城域核心'), a.所属城市,
				(case when b.网络故障报表>0 then round(a.故障影响报表/b.网络故障报表*1000,1)   else 0 end )
				from
				(
				select t.c802000002 as 所属城市,nvl(sum(t.c802000011),0) as 故障影响报表  from {300} t where 1=1 {5} group by t.c802000002
				) a,
				(
				select t.c802000002 as 所属城市,nvl(sum(t.c802000038),0) as 网络故障报表 from {100} t where 1=1 {5} group by t.c802000002
				) b
				where a.所属城市=b.所属城市
				union all
				select trim('线路维护能力城域接入'), a.所属城市,
				(case when b.网络故障报表>0 then round(a.故障影响报表/b.网络故障报表*1000,1)  else 0 end )
				from
				(
				select t.c802000002 as 所属城市,nvl(sum(t.c802000012),0) as 故障影响报表  from {300} t where 1=1 {5} group by t.c802000002
				) a,
				(
				select t.c802000002 as 所属城市,nvl(sum(t.c802000036),0) as 网络故障报表 from {100} t where 1=1 {5} group by t.c802000002
				) b
				where a.所属城市=b.所属城市
				union all
				select trim('线路维护能力千公里阻断时长均值'), a.所属城市,
				(case when b.网络故障报表>0 then round(a.故障影响报表/b.网络故障报表*1000,1)  else 0 end )
				from
				(
				select t.c802000002 as 所属城市,nvl(sum(t.c802000004),0) as 故障影响报表  from {300} t where 1=1 {5} group by t.c802000002
				) a,
				(
				select t.c802000002 as 所属城市,nvl(sum(t.c802000026),0) as 网络故障报表 from {100} t where 1=1 {5} group by t.c802000002
				) b
				where a.所属城市=b.所属城市
				union all
				select trim('线路维护能力千公里故障次数'), a.所属城市,
				(case when b.网络故障报表>0 then round(a.故障影响报表/b.网络故障报表*1000,1)  else 0 end )
				from
				(
				select t.c802000002 as 所属城市,nvl(sum(t.c802000013),0) as 故障影响报表  from {200} t where 1=1 {5} group by t.c802000002
				) a,
				(
				select t.c802000002 as 所属城市,nvl(sum(t.c802000026),0) as 网络故障报表 from {100} t where 1=1 {5} group by t.c802000002
				) b
				where a.所属城市=b.所属城市
				union all
				select trim('维护支撑能力线路'), a.所属城市,
				(case when b.网络故障报表>0 then round(a.故障影响报表/b.网络故障报表*10000,1)  else 0 end )
				from
				(
				select t.c802000002 as 所属城市,nvl(sum(t.c802000013),0) as 故障影响报表  from {200} t where 1=1 {5} group by t.c802000002
				) a,
				(
				select t.c802000002 as 所属城市,nvl(sum(t.c802000013),0) as 网络故障报表 from {100} t where 1=1 {5} group by t.c802000002
				) b
				where a.所属城市=b.所属城市
				union all
				select trim('维护支撑能力传输设备'), a.所属城市,
				(case when b.网络故障报表>0 then round(a.故障影响报表/b.网络故障报表*10000,1)  else 0 end )
				from
				(
				select t.c802000002 as 所属城市,nvl(sum(t.c802000015),0) as 故障影响报表  from {200} t where 1=1 {5} group by t.c802000002
				) a,
				(
				select t.c802000002 as 所属城市,nvl(sum(t.c802000013),0) as 网络故障报表 from {100} t where 1=1 {5} group by t.c802000002
				) b
				where a.所属城市=b.所属城市
				union all
				select trim('维护支撑能力传输连接件'), a.所属城市,
				(case when b.网络故障报表>0 then round(a.故障影响报表/b.网络故障报表*10000,1)  else 0 end )
				from
				(
				select t.c802000002 as 所属城市,nvl(sum(t.c802000026),0) as 故障影响报表  from {200} t where 1=1 {5} group by t.c802000002
				) a,
				(
				select t.c802000002 as 所属城市,nvl(sum(t.c802000013),0) as 网络故障报表 from {100} t where 1=1 {5} group by t.c802000002
				) b
				where a.所属城市=b.所属城市
				union all
				select trim('维护支撑能力网管系统'), a.所属城市,
				(case when b.网络故障报表>0 then round(a.故障影响报表/b.网络故障报表*10000,1) else 0 end )
				from
				(
				select t.c802000002 as 所属城市,nvl(sum(t.c802000040),0) as 故障影响报表  from {200} t where 1=1 {5} group by t.c802000002
				) a,
				(
				select t.c802000002 as 所属城市,nvl(sum(t.c802000013),0) as 网络故障报表 from {100} t where 1=1 {5} group by t.c802000002
				) b
				where a.所属城市=b.所属城市
				union all
				select trim('维护支撑能力电源'), a.所属城市,
				(case when b.网络故障报表>0 then round(a.故障影响报表/b.网络故障报表*10000,1) else 0 end )
				from
				(
				select t.c802000002 as 所属城市,nvl(sum(t.c536870933),0) as 故障影响报表  from {200} t where 1=1 {5} group by t.c802000002
				) a,
				(
				select t.c802000002 as 所属城市,nvl(sum(t.c802000013),0) as 网络故障报表 from {100} t where 1=1 {5} group by t.c802000002
				) b
				where a.所属城市=b.所属城市
				union all
				select trim('维护支撑能力网内故障率合计(次/万2M)'), a.所属城市,
				(case when b.网络故障报表>0 then round(a.故障影响报表/b.网络故障报表*10000,1) else 0 end )
				from
				(
				select t.c802000002 as 所属城市,nvl(sum(t.c802000013)+sum(t.c802000015)+sum(t.c802000026)+sum(t.c802000040),0) as 故障影响报表  from {200} t where 1=1 {5} group by t.c802000002
				) a,
				(
				select t.c802000002 as 所属城市,nvl(sum(t.c802000013),0) as 网络故障报表 from {100} t where 1=1 {5} group by t.c802000002
				) b
				where a.所属城市=b.所属城市
				union all
				select trim('维护支撑能力电路调度及时率'), a.所属城市,
				round((1-a.故障影响报表)*100,1)
				from
				(
				select t.c802000002 as 所属城市,(case when sum(t.c802000017)>0 then sum(t.c802000021)/sum(t.c802000017) else 0 end ) as 故障影响报表 
				 from {400} t where 1=1 {5} group by t.c802000002
				) a
				union all
				select trim('维护支撑能力人员效率(2M/人)'), a.所属城市,
				round(a.故障影响报表,1)
				from
				(
				select t.c802000002 as 所属城市,
				(case when sum(t.c802000052)>0 then sum(t.c802000013)/sum(t.c802000052) else 0 end ) as 故障影响报表 
				from {100} t where 1=1 {5} group by t.c802000002
				) a
				union all
				select trim('维护支撑能力重大故障(次)'), a.所属城市,
				round(a.故障影响报表,1)
				from
				(
				select t.c802000002 as 所属城市,nvl(sum(t.c802000033),0) as 故障影响报表  from {400} t where 1=1 {5} group by t.c802000002
				) a
				union all
				select trim('维护支撑能力网管可用率'), a.所属城市,
				(case when b.网络故障报表>0 then round((1-a.故障影响报表/b.网络故障报表*30*24)*100,1) else 0 end )
				from
				(
				select t.c802000002 as 所属城市,nvl(sum(t.c802000007),0) as 故障影响报表  from {300} t where 1=1 {5} group by t.c802000002
				) a,
				(
				select t.c802000002 as 所属城市,nvl(sum(t.c536870933),0) as 网络故障报表 from {100} t where 1=1 {5} group by t.c802000002
				) b
				where a.所属城市=b.所属城市
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				union all
				select trim('故障处理能力线路'), a.所属城市,
				(case when b.网络故障数据_线路>0 then round(a.故障影响数据_线路/b.网络故障数据_线路,1)  else 0 end )
				from 
				(
				select '各项合计' as 所属城市,nvl(sum(t.c802000004),0) as 故障影响数据_线路  from {300} t where 1=1 {5}  {1} 
				) a,
				(
				select '各项合计' as 所属城市,nvl(sum(t.c802000013),0) as 网络故障数据_线路 from {200} t where 1=1 {5}  {1} 
				) b
				where a.所属城市=b.所属城市 
				union all
				select trim('故障处理能力传输设备'), a.所属城市,
				(case when b.网络故障_传输设备>0 then round(a.故障影响_传输设备/b.网络故障_传输设备,1)  else 0 end )
				from 
				(
				select '各项合计' as 所属城市,nvl(sum(t.c802000005),0) as 故障影响_传输设备  from {300} t where 1=1 {5} {1} 
				) a,
				(
				select '各项合计' as 所属城市,nvl(sum(t.c802000015),0) as 网络故障_传输设备 from {200} t where 1=1 {5} {1} 
				) b
				where a.所属城市=b.所属城市
				union all
				select trim('故障处理能力传输连接件'), a.所属城市,
				(case when b.网络故障_传输连接件>0 then round(a.故障影响_传输连接件/b.网络故障_传输连接件,1)  else 0 end )
				from 
				(
				select '各项合计' as 所属城市,nvl(sum(t.c802000006),0) as 故障影响_传输连接件  from {300} t where 1=1 {5} {1} 
				) a,
				(
				select '各项合计' as 所属城市,nvl(sum(t.c802000026),0) as 网络故障_传输连接件 from {200} t where 1=1 {5} {1} 
				) b
				where a.所属城市=b.所属城市
				union all
				select trim('故障处理能力网管系统'), a.所属城市,
				(case when b.网络故障_网管系统>0 then round(a.故障影响_网管系统/b.网络故障_网管系统,1)  else 0 end )
				from 
				(
				select '各项合计' as 所属城市,nvl(sum(t.c802000007),0) as 故障影响_网管系统  from {300} t where 1=1 {5} {1} 
				) a,
				(
				select '各项合计' as 所属城市,nvl(sum(t.c802000040),0) as 网络故障_网管系统 from {200} t where 1=1 {5} {1} 
				) b
				where a.所属城市=b.所属城市
				union all
				select trim('故障处理能力电源'), a.所属城市,
				(case when b.网络故障_电源>0 then round(a.故障影响_电源/b.网络故障_电源,1)  else 0 end )
				from
				(
				select '各项合计' as 所属城市,nvl(sum(t.c802000008),0) as 故障影响_电源  from {300} t where 1=1 {5} {1} 
				) a,
				(
				select '各项合计' as 所属城市,nvl(sum(t.c536870933),0) as 网络故障_电源 from {200} t where 1=1 {5} {1} 
				) b
				where a.所属城市=b.所属城市
				union all
				select trim('故障处理能力网内故障平均处理时长(小时/次)'), a.所属城市,
				(case when b.网络故障报表>0 then round(a.故障影响报表/b.网络故障报表,1)  else 0 end )
				from
				(
				select '各项合计' as 所属城市,nvl(sum(t.c802000022-t.c802000008),0) as 故障影响报表  from {300} t where 1=1 {5} {1} 
				) a,
				(
				select '各项合计' as 所属城市,nvl(sum(t.c802000013)+sum(t.c802000015)+sum(t.c802000026)+sum(t.c802000040),0) as 网络故障报表 from {200} t where 1=1 {5} {1} 
				) b
				where a.所属城市=b.所属城市
				union all
				select trim('故障处理能力网内故障处理及时率'), a.所属城市,
				(case when b.网络故障报表>0 then round((1-a.故障影响报表/b.网络故障报表)*100,1)   else 0 end )
				from
				(
				select '各项合计' as 所属城市,nvl(sum(t.c802000035),0) as 故障影响报表  from {400} t where 1=1 {5} {1} 
				) a,
				(
				select '各项合计' as 所属城市,nvl(sum(t.c802000013)+sum(t.c802000015)+sum(t.c802000026)+sum(t.c802000040),0) as 网络故障报表 from {200} t where 1=1 {5} {1} 
				) b
				where a.所属城市=b.所属城市
				union all
				select trim('线路维护能力一干'), a.所属城市,
				(case when b.网络故障报表>0 then round(a.故障影响报表/b.网络故障报表*1000,1)   else 0 end )
				from
				(
				select '各项合计' as 所属城市,nvl(sum(t.c802000009),0) as 故障影响报表  from {300} t where 1=1 {5} {1} 
				) a,
				(
				select '各项合计' as 所属城市,nvl(sum(t.c802000033),0) as 网络故障报表 from {100} t where 1=1 {5} {1} 
				) b
				where a.所属城市=b.所属城市
				union all
				select trim('线路维护能力二干'), a.所属城市,
				(case when b.网络故障报表>0 then round(a.故障影响报表/b.网络故障报表*1000,1)   else 0 end )
				from
				(
				select '各项合计' as 所属城市,nvl(sum(t.c802000010),0) as 故障影响报表  from {300} t where 1=1 {5} {1} 
				) a,
				(
				select '各项合计' as 所属城市,nvl(sum(t.c802000035),0) as 网络故障报表 from {100} t where 1=1 {5} {1} 
				) b
				where a.所属城市=b.所属城市
				union all
				select trim('线路维护能力城域核心'), a.所属城市,
				(case when b.网络故障报表>0 then round(a.故障影响报表/b.网络故障报表*1000,1)   else 0 end )
				from
				(
				select '各项合计' as 所属城市,nvl(sum(t.c802000011),0) as 故障影响报表  from {300} t where 1=1 {5} {1} 
				) a,
				(
				select '各项合计' as 所属城市,nvl(sum(t.c802000038),0) as 网络故障报表 from {100} t where 1=1 {5} {1} 
				) b
				where a.所属城市=b.所属城市
				union all
				select trim('线路维护能力城域接入'), a.所属城市,
				(case when b.网络故障报表>0 then round(a.故障影响报表/b.网络故障报表*1000,1)  else 0 end )
				from
				(
				select '各项合计' as 所属城市,nvl(sum(t.c802000012),0) as 故障影响报表  from {300} t where 1=1 {5} {1} 
				) a,
				(
				select '各项合计' as 所属城市,nvl(sum(t.c802000036),0) as 网络故障报表 from {100} t where 1=1 {5} {1} 
				) b
				where a.所属城市=b.所属城市
				union all
				select trim('线路维护能力千公里阻断时长均值'), a.所属城市,
				(case when b.网络故障报表>0 then round(a.故障影响报表/b.网络故障报表*1000,1)  else 0 end )
				from
				(
				select '各项合计' as 所属城市,nvl(sum(t.c802000004),0) as 故障影响报表  from {300} t where 1=1 {5} {1} 
				) a,
				(
				select '各项合计' as 所属城市,nvl(sum(t.c802000026),0) as 网络故障报表 from {100} t where 1=1 {5} {1} 
				) b
				where a.所属城市=b.所属城市
				union all
				select trim('线路维护能力千公里故障次数'), a.所属城市,
				(case when b.网络故障报表>0 then round(a.故障影响报表/b.网络故障报表*1000,1)  else 0 end )
				from
				(
				select '各项合计' as 所属城市,nvl(sum(t.c802000013),0) as 故障影响报表  from {200} t where 1=1 {5} {1} 
				) a,
				(
				select '各项合计' as 所属城市,nvl(sum(t.c802000026),0) as 网络故障报表 from {100} t where 1=1 {5} {1} 
				) b
				where a.所属城市=b.所属城市
				union all
				select trim('维护支撑能力线路'), a.所属城市,
				(case when b.网络故障报表>0 then round(a.故障影响报表/b.网络故障报表*10000,1)  else 0 end )
				from
				(
				select '各项合计' as 所属城市,nvl(sum(t.c802000013),0) as 故障影响报表  from {200} t where 1=1 {5} {1} 
				) a,
				(
				select '各项合计' as 所属城市,nvl(sum(t.c802000013),0) as 网络故障报表 from {100} t where 1=1 {5} {1} 
				) b
				where a.所属城市=b.所属城市
				union all
				select trim('维护支撑能力传输设备'), a.所属城市,
				(case when b.网络故障报表>0 then round(a.故障影响报表/b.网络故障报表*10000,1)  else 0 end )
				from
				(
				select '各项合计' as 所属城市,nvl(sum(t.c802000015),0) as 故障影响报表  from {200} t where 1=1 {5} {1} 
				) a,
				(
				select '各项合计' as 所属城市,nvl(sum(t.c802000013),0) as 网络故障报表 from {100} t where 1=1 {5} {1} 
				) b
				where a.所属城市=b.所属城市
				union all
				select trim('维护支撑能力传输连接件'), a.所属城市,
				(case when b.网络故障报表>0 then round(a.故障影响报表/b.网络故障报表*10000,1)  else 0 end )
				from
				(
				select '各项合计' as 所属城市,nvl(sum(t.c802000026),0) as 故障影响报表  from {200} t where 1=1 {5} {1} 
				) a,
				(
				select '各项合计' as 所属城市,nvl(sum(t.c802000013),0) as 网络故障报表 from {100} t where 1=1 {5} {1} 
				) b
				where a.所属城市=b.所属城市
				union all
				select trim('维护支撑能力网管系统'), a.所属城市,
				(case when b.网络故障报表>0 then round(a.故障影响报表/b.网络故障报表*10000,1) else 0 end )
				from
				(
				select '各项合计' as 所属城市,nvl(sum(t.c802000040),0) as 故障影响报表  from {200} t where 1=1 {5} {1} 
				) a,
				(
				select '各项合计' as 所属城市,nvl(sum(t.c802000013),0) as 网络故障报表 from {100} t where 1=1 {5} {1} 
				) b
				where a.所属城市=b.所属城市
				union all
				select trim('维护支撑能力电源'), a.所属城市,
				(case when b.网络故障报表>0 then round(a.故障影响报表/b.网络故障报表*10000,1) else 0 end )
				from
				(
				select '各项合计' as 所属城市,nvl(sum(t.c536870933),0) as 故障影响报表  from {200} t where 1=1 {5} {1} 
				) a,
				(
				select '各项合计' as 所属城市,nvl(sum(t.c802000013),0) as 网络故障报表 from {100} t where 1=1 {5} {1} 
				) b
				where a.所属城市=b.所属城市
				union all
				select trim('维护支撑能力网内故障率合计(次/万2M)'), a.所属城市,
				(case when b.网络故障报表>0 then round(a.故障影响报表/b.网络故障报表*10000,1) else 0 end )
				from
				(
				select '各项合计' as 所属城市,nvl(sum(t.c802000013)+sum(t.c802000015)+sum(t.c802000026)+sum(t.c802000040),0) as 故障影响报表  from {200} t where 1=1 {5} {1} 
				) a,
				(
				select '各项合计' as 所属城市,nvl(sum(t.c802000013),0) as 网络故障报表 from {100} t where 1=1 {5} {1} 
				) b
				where a.所属城市=b.所属城市
				union all
				select trim('维护支撑能力电路调度及时率'), a.所属城市,
				round((1-a.故障影响报表)*100,1)
				from
				(
				select '各项合计' as 所属城市,(case when sum(t.c802000017)>0 then sum(t.c802000021)/sum(t.c802000017) else 0 end ) as 故障影响报表   from {400} t where 1=1 {5} {1} 
				) a
				union all
				select trim('维护支撑能力人员效率(2M/人)'), a.所属城市,
				round(a.故障影响报表,1)
				from
				(
				select '各项合计' as 所属城市,(case when sum(t.c802000052)>0 then sum(t.c802000013)/sum(t.c802000052) else 0 end ) as 故障影响报表   from {100} t where 1=1 {5} {1} 
				) a
				union all
				select trim('维护支撑能力重大故障(次)'), a.所属城市,
				round(a.故障影响报表,1)
				from
				(
				select '各项合计' as 所属城市,nvl(sum(t.c802000033),0) as 故障影响报表  from {400} t where 1=1 {5} {1} 
				) a
				union all
				select trim('维护支撑能力网管可用率'), a.所属城市,
				(case when b.网络故障报表>0 then round((1-a.故障影响报表/b.网络故障报表*30*24)*100,1) else 0 end )
				from
				(
				select '各项合计' as 所属城市,nvl(sum(t.c802000007),0) as 故障影响报表  from {300} t where 1=1 {5} {1} 
				) a,
				(
				select '各项合计' as 所属城市,nvl(sum(t.c536870933),0) as 网络故障报表 from {100} t where 1=1 {5} {1} 
				) b
				where a.所属城市=b.所属城市
				
				
				
				
		]]></item>
	</sql>
</sql-group>

