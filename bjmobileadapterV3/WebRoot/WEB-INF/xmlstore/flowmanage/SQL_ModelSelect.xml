<?xml version="1.0" encoding="UTF-8"?>
<sql-group>
	<doc>
		<author>wxdong</author> 
		<date>2009年8月15日</date> 
		<description>工单模板查询</description> 		
	</doc>
	<sqlquery name="query.ModelList">
		<select>
		<![CDATA[ 
		select 
			/*COUNT*/
			*
			/*COUNT*/
			 from(
		select C1 as modelID
			, C650000001 as modelname
			, C650000002 as modelversion
			, C650000003 as modelbasename
			, C650000004 as modelbaseschema
			, C650000005 as modeltplname
			, C650000006 as modeltplID
			, C650000007 as modelsummary
			, C650000008 as modelactive
			, C650000009 as modelauthor
			, C650000010 as modelauthorID
			, C650000011 as modelmodifier
			, C650000012 as modelmodifierID
			, C650000013 as modelcreatedate
			, C650000014 as modelmodifydate
			, C650000015 as modelstartdate
			, C650000016 as modelenddate
			, C650000017 as modeldesc		
		from {WF:App_Base_Model_Info} modelinfo
		where 
		C650000008 = 1
		$basepara$ 
		) result 
		$extend$
		  ]]> 
		</select>
		<customwhere>
			<parameterMap prepend="AND" name="basepara">
				<mapingFiled  prepend="AND" fieldName="baseschema"  fieldType="4">
					<mapsql value="isnotnull">
						<![CDATA[
							 C650000004 = '#baseschema#'
						 ]]>
					</mapsql>
				</mapingFiled>
				<mapingFiled  prepend="AND" fieldName="userid"  fieldType="4">
					<mapsql value="isnotnull">
						<![CDATA[
							 C650000010 = '#userid#'
						 ]]>
					</mapsql>
				</mapingFiled>
			</parameterMap>
			<parameterMap prepend="EXTEND" name="extend">
					<mapingFiled  prepend="EXTEND" fieldName="orderby"  fieldType="4">
						<mapsql value="isnotnull">
							<![CDATA[
								   order by #orderby#
							 ]]>
						</mapsql>
					</mapingFiled>
			</parameterMap>
		</customwhere>
		<sqlother>
			<sqlpagination isavailability="true">
				<sqlpageSize>8</sqlpageSize>
			</sqlpagination>
			<sqldistinct isavailability="false">排重的列1,排重的列2</sqldistinct>
			<sqlSortFields isavailability="false">排序的列1,排序的列2</sqlSortFields>
		</sqlother>
		<PageQueryField>
			<field name="BaseTplName">
				<fieldID>650000001</fieldID><!--查询字段ID-->
				<fieldEnglishname>modelname</fieldEnglishname><!--查询字段英文名，该英文名会做为我们查询条件-->
				<fieldChinesename>模板名称</fieldChinesename><!--查询字段用于在界面显示的名称-->
				<fieldType>4</fieldType><!--查询字段的数据类型(4：字符等，与Remedy类型保持一致)-->
				<fieldDisplaytype>4</fieldDisplaytype><!--查询字段用于在界面显示的类型(4：字符/TEXT等，与Remedy类型保持一致)-->
				<fieldDisplaytypeValue></fieldDisplaytypeValue><!--查询字段用于在界面显示的值的范围(只有当是Select时有值：格式为"值+冒号+显示值+分号，"如：0:是;1:否;';)-->
				<fieldDefaultValue></fieldDefaultValue><!--查询字段用于在界面显示时的默认值-->
			</field>
		</PageQueryField>
	</sqlquery>
	
	<sqlquery name="query.ModelFieldList">
		<select>
		<![CDATA[ 
		select 
			/*COUNT*/
			*
			/*COUNT*/
			 from(
		select C650000007 as fieldID
			, C650000008 as fielddbname
			, C650000009 as fieldtype
			, C650000010 as fieldtypevalue
			, C650000011 as fieldshowname
			, C650000012 as fieldisshow
			, C650000013 as fieldshoworder
			, C650000014 as fieldshowoneline
			, C650000015 as fieldvalue	
		from {WF:App_Base_Model_Field} modelfield
		where 
		C650000012 = 1
		$basepara$ 
		) result 
		order by fieldshoworder asc
		  ]]> 
		</select>
		<customwhere>
			<parameterMap prepend="AND" name="basepara">
				<mapingFiled  prepend="AND" fieldName="modelID"  fieldType="4">
					<mapsql value="isnotnull">
						<![CDATA[
							 C650000000 = '#modelID#'
						 ]]>
					</mapsql>
				</mapingFiled>
			</parameterMap>
		</customwhere>
	</sqlquery>
	
	<sqlquery name="query.ModelAttachList">
		<select>
		<![CDATA[ 
		select 
			/*COUNT*/
			*
			/*COUNT*/
			 from(
		select C1 as modelAttachID
			,C650000008 as upLoadFileName		
		from {WF:App_Base_Model_Attachment} modelattach
		where 
		 C650000009 = '#attviewID#'
		$basepara$ 
		) result 
		order by modelAttachID asc
		  ]]> 
		</select>
		<customwhere>
			<parameterMap prepend="AND" name="basepara">
				<mapingFiled  prepend="AND" fieldName="modelID"  fieldType="4">
					<mapsql value="isnotnull">
						<![CDATA[
							 C650000000 = '#modelID#'
						 ]]>
					</mapsql>
				</mapingFiled>
			</parameterMap>
		</customwhere>
	</sqlquery>
</sql-group>

