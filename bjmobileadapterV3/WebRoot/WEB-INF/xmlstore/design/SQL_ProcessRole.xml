<?xml version="1.0" encoding="UTF-8"?>
<sql-group>
	<doc>
		<author>作者</author> 
		<date>时间</date> 
		<description>Sql 描述</description> 		
	</doc>
	<sqlquery name="query.design.ProcessRole">
		<select>
		<![CDATA[ 
   			  select 
   			  /*COUNT*/   
   			  *
              /*COUNT*/
              from
              (
                select 
					b.C1 
					, r.C1 as RoleC1 
					, b.C650000003 as BaseSchema 
					, b.C650000015 as BaseName 
					, dp.C1 as ProcessID 
					, dp.C700020018 as ProcessName 
					, r.C700022002 as RoleProcessRoleType 
					, r.C700022101 as Assignee 
					, r.C700022102 as AssigneeID 
					, r.C700022103 as RoleGroup 
					, r.C700022104 as GroupID 
					, r.C700022201 as RoleKey 
					, r.C700022301 as ContextAssignee_FieldID 
					, r.C700022302 as ContextAssigneeID_FieldID 
					, r.C700022303 as ContextGroup_FieldID 
					, r.C700022404 as ContextGroupID_FieldID 
					, r.C700022000 as RoleID 
					, r.C700022001 as RoleName 
					, r.C700022501 as Condition 
				from {WF:App_TplBase} b, {WF:App_TplDealProcess} dp, {WF:App_TplBase_PerformRole} r 
				where 
					b.C1 = dp.C700020001 
					and b.C650000003 = dp.C700020002 
					and b.C1 = r.C700022004 
					and r.C700022006 = dp.C700020003
					$searchpara$
				)
				$extend$
				   
		  ]]> 
		</select>
		<customwhere>
			<parameterMap prepend="AND" name="searchpara">
				<mapingFiled  prepend="AND" fieldName="baseid"  fieldType="4">
					<mapsql value="isnotnull">
						<![CDATA[
							 b.C1 = '#baseid#'
						 ]]>  			
					</mapsql>
				</mapingFiled>
				<mapingFiled  prepend="AND" fieldName="roleid"  fieldType="4">
					<mapsql value="isnotnull">
						<![CDATA[
							 r.C700022000 = '#roleid#'
						 ]]>  			
					</mapsql>
				</mapingFiled>
			</parameterMap>
			<parameterMap prepend="EXTEND" name="extend">
					<mapingFiled  prepend="" fieldName="orderby"  fieldType="4">
						<mapsql value="isnotnull">
							<![CDATA[
								 order by  #orderby#
							 ]]>  			
						</mapsql>
					</mapingFiled>
			</parameterMap>				
 		</customwhere>
 
	</sqlquery>
	
</sql-group>
