<?xml version="1.0" encoding="UTF-8"?>
<sql-group>

	<sqlquery name="query.BaseView.EL_TTM_TTH">
		<select>
		<![CDATA[ 
		select 
			/*COUNT*/
			*
			/*COUNT*/
			 from(
		select
			 dp.C700020001		as baseid,  		
			 dp.C700020002      as baseschema,		
			 base.C700000002    as basename,		
			 base.C700000003    as basesn,			
			 base.C700000018    as BaseDealOutTime,
			 base.C700000010    as BaseStatus,		
			 base.C700000011    as BaseSummary,
			 base.C700000004	as BaseCreatorFullName,		
			 dp.C1        		as processid,		
			 dp.C700020018      as ProDesc,			
			 dp.C700020020      as FlagActive,		
			 dp.C700020019     	as FlagType,		
			 dp.C700020043      as ProcessType,
			 dp.C700020005      as Assginee,
			 dp.C700020101      as AssigneeCorp,
			 dp.C700020103      as AssigneeDep,
			 dp.C700020009      as Dealer,
			 dp.C700020111      as DealerCorp,
			 dp.C700020113      as DealerDep,
			 dp.C700020007      as groupname,
			 dp.C700020015      as StDate,
			 dp.C700020016      as BgDate,
			 dp.C700020011      as ProcessStatus,
			 dp.C700020013      as ProcessAcceptOutTime,
			 dp.C700020014      as ProcessDealOutTime,
			 base.C700000008    as BaseFinishDate,
			 base.C700000022    as BaseTplID
		from {WF:EL_TTM_TTH} base,{WF:App_DealProcess} dp
		where
		base.C1 = dp.C700020001
			and dp.C700020002 = 'WF:EL_TTM_TTH' 
			and dp.C700020020 = '1'
			
		#timdCompare#
		#city#
		#factory#
		$searchpara$
		$waitdealuser$
		and (C700020019 = '0' or C700020019 = '1' or C700020019 = '2'  or C700020019 = '4')
		
		$sch_assginee$
		) result 
		$extend$
		  ]]> 
		</select>
		<customwhere>
			<parameterMap prepend="AND" name="searchpara">

            	<mapingFiled  prepend="AND" fieldName="creator"  fieldType="4">
					<mapsql value="isnotnull">
						<![CDATA[
							 C700000004 like '%#creator#%'
						 ]]>  			
					</mapsql>
				</mapingFiled>
				<mapingFiled  prepend="AND" fieldName="baseSummary"  fieldType="4">
					<mapsql value="isnotnull">
						<![CDATA[
							 C700000011 like '%#baseSummary#%'
						 ]]>  			
					</mapsql>
				</mapingFiled>
				<mapingFiled  prepend="AND" fieldName="classList1"  fieldType="4" >
					<mapsql value="isnotnull" logic="or">
						<![CDATA[
							C700000014 like '#classList1#%'
						 ]]>  			
					</mapsql>
				</mapingFiled>
				<mapingFiled  prepend="AND" fieldName="baseCreatorDep"  fieldType="4">
					<mapsql value="isnotnull" >
						<![CDATA[
							 C700000103 like '%#baseCreatorDep#%'
						 ]]>  			
					</mapsql>
				</mapingFiled>
				<mapingFiled  prepend="AND" fieldName="inc_NE_Name"  fieldType="4">
					<mapsql value="isnotnull">
						<![CDATA[
							C800020018 like '%#inc_NE_Name#%'
						 ]]>  			
					</mapsql>
				</mapingFiled>
				<mapingFiled  prepend="AND" fieldName="baseStatus"  fieldType="4">
					<mapsql value="isnotnull">
						<![CDATA[
							C700000010 = '#baseStatus#'
						 ]]>  			
					</mapsql>
				</mapingFiled>		
				<mapingFiled  prepend="AND" fieldName="equipmentType"  fieldType="4">
					<mapsql value="isnotnull">
						<![CDATA[
							C800020016 like '%#equipmentType#%'
						 ]]>  			
					</mapsql>
				</mapingFiled>
				<mapingFiled  prepend="AND" fieldName="inc_Alarm_SN"  fieldType="4">
					<mapsql value="isnotnull">
						<![CDATA[
							C800020005 like '%#inc_Alarm_SN#%'
						 ]]>  			
					</mapsql>
				</mapingFiled>
				<mapingFiled  prepend="AND" fieldName="alarmLevel"  fieldType="4">
					<mapsql value="isnotnull">
						<![CDATA[
							C800020027 = '#alarmLevel#'
						 ]]>  			
					</mapsql>
				</mapingFiled>
				<mapingFiled  prepend="AND" fieldName="dealOutTime_Long"  fieldType="4">
                   <mapsql value="isnotnull" logic="sql"> 
						<![CDATA[ 
       						C700000018< '#dealOutTime_Long#'
						 ]]> 
					</mapsql>
                </mapingFiled>
			</parameterMap>
			
			<parameterMap prepend="AND" name="waitdealuser">
				<parameterMap prepend="" name="waitdealuser">
					
					<mapingFiled  prepend="AND" fieldName="type"  fieldType="4">
							<mapsql value="isnotnull">
								<![CDATA[
									 C700020016 is null
								 ]]>  			
							</mapsql>
					</mapingFiled>	

					<parameterMap prepend="AND" name="waitdealuser">
						<mapingFiled  prepend="OR" fieldName="AssgineeID"  fieldType="4">
							<mapsql value="isnotnull">
								<![CDATA[
									 C700020006 = '#AssgineeID#' or C700020048 = '#AssgineeID#'
								 ]]>  			
							</mapsql>
						</mapingFiled>
						<mapingFiled  prepend="OR" fieldName="GroupID"  fieldType="4">
							<mapsql value="isnotnull">
								<![CDATA[
									 ';#GroupID#' like '%;' || C700020008 || ';%'
								 ]]>  			
							</mapsql>
						</mapingFiled>
						<mapingFiled  prepend="OR" fieldName="RoleID"  fieldType="4">
							<mapsql value="isnotnull">
								<![CDATA[
									 ';#RoleID#' like '%;' || C700020008 || ';%'
								 ]]>  			
							</mapsql>
						</mapingFiled>
					</parameterMap>
				</parameterMap>
				<parameterMap prepend="OR" name="waitdealuser_asg">
					<mapingFiled  prepend="AND" fieldName="type"  fieldType="4">
						<mapsql value="isnotnull">
							<![CDATA[
								 C700020016 > '0'
							 ]]>  			
						</mapsql>
					</mapingFiled>
					<mapingFiled  prepend="AND" fieldName="BaseStatus"  fieldType="4">
						<mapsql value="isnotnull">
							<![CDATA[
								 C700000010 = '#BaseStatus#'
							 ]]>  			
						</mapsql>
					</mapingFiled>

					<parameterMap prepend="AND" name="waitdealuser">
						<mapingFiled  prepend="OR" fieldName="AssgineeID"  fieldType="4">
							<mapsql value="isnotnull">
								<![CDATA[
									 C700020010 = '#AssgineeID#'
								 ]]>  			
							</mapsql>
						</mapingFiled>
						<parameterMap prepend="OR" name="waitdealuser">
							<mapingFiled  prepend="AND" fieldName="GroupID"  fieldType="4">
								<mapsql value="isnotnull">
									<![CDATA[
										 C700020049 = '0'
									 ]]>  			
								</mapsql>
							</mapingFiled>
							<mapingFiled  prepend="AND" fieldName="GroupID"  fieldType="4">
								<mapsql value="isnotnull">
									<![CDATA[
										 ';#GroupID#' like '%;' || C700020008 || ';%'
									 ]]>  			
								</mapsql>
							</mapingFiled>
							<mapingFiled  prepend="OR" fieldName="RoleID"  fieldType="4">
								<mapsql value="isnotnull">
									<![CDATA[
										 ';#RoleID#' like '%;' || C700020008 || ';%'
									 ]]>  			
								</mapsql>
							</mapingFiled>
						</parameterMap>
					</parameterMap>
				</parameterMap>
			</parameterMap>
			
			<parameterMap prepend="AND" name="sch_assginee">
				<mapingFiled  prepend="AND" fieldName="Assginee"  fieldType="4">
					<mapsql value="isnotnull">
						<![CDATA[
							 C700020005 like '%#Assginee#%'
						 ]]>  			
					</mapsql>
				</mapingFiled>
				<mapingFiled  prepend="AND" fieldName="groupname"  fieldType="4">
					<mapsql value="isnotnull">
						<![CDATA[
							 C700020007 like '%#groupname#%'
						 ]]>  			
					</mapsql>
				</mapingFiled>
			</parameterMap>
			
			<parameterMap prepend="EXTEND" name="extend">
					<mapingFiled  prepend="EXTEND" fieldName="orderby"  fieldType="4">
						<mapsql value="isnotnull">
							<![CDATA[
								   order by #orderby#
							 ]]>
						</mapsql>
					</mapingFiled>
			</parameterMap>
		</customwhere>
		<sqlother>
			<sqlpagination isavailability="true">
				<sqlpageSize>20</sqlpageSize>
			</sqlpagination>
			<sqldistinct isavailability="false">排重的列1,排重的列2</sqldistinct>
			<sqlSortFields isavailability="false">排序的列1,排序的列2</sqlSortFields>
		</sqlother>
		<PageQueryField>
			
			<field name="C700000003">
				<fieldID>700000003</fieldID><!--查询字段ID-->
				<fieldEnglishname>BaseSN</fieldEnglishname><!--查询字段英文名，该英文名会做为我们查询条件-->
				<fieldChinesename>流水号</fieldChinesename><!--查询字段用于在界面显示的名称-->
				<fieldType>4</fieldType><!--查询字段的数据类型(4：字符等，与Remedy类型保持一致)-->
				<fieldDisplaytype>4</fieldDisplaytype><!--查询字段用于在界面显示的类型(4：字符/TEXT等，与Remedy类型保持一致)-->
				<fieldDisplaytypeValue></fieldDisplaytypeValue><!--查询字段用于在界面显示的值的范围(只有当是Select时有值：格式为"值+冒号+显示值+分号，"如：0:是;1:否;';)-->
				<fieldDefaultValue></fieldDefaultValue><!--查询字段用于在界面显示时的默认值-->
			</field>
				<field name="c700000011">
				<fieldID>700000011</fieldID>
				<fieldEnglishname>BaseSummary</fieldEnglishname>
				<fieldChinesename>工单主题</fieldChinesename>
				<fieldType>4</fieldType>
				<fieldDisplaytype>4</fieldDisplaytype>
				<fieldDisplaytypeValue></fieldDisplaytypeValue>
				<fieldDefaultValue></fieldDefaultValue>
			</field>
			<field name="c700000004">
				<fieldID>700000004</fieldID><!--查询字段ID-->
				<fieldEnglishname>BaseCreatorFullName</fieldEnglishname><!--查询字段英文名，该英文名会做为我们查询条件-->
				<fieldChinesename>派单人</fieldChinesename><!--查询字段用于在界面显示的名称-->
				<fieldType>4</fieldType><!--查询字段的数据类型(4：字符等，与Remedy类型保持一致)-->
				<fieldDisplaytype>4</fieldDisplaytype><!--查询字段用于在界面显示的类型(4：字符/TEXT等，与Remedy类型保持一致)-->
				<fieldDisplaytypeValue></fieldDisplaytypeValue><!--查询字段用于在界面显示的值的范围(只有当是Select时有值：格式为"值+冒号+显示值+分号，"如：0:是;1:否;';)-->
				<fieldDefaultValue></fieldDefaultValue><!--查询字段用于在界面显示时的默认值-->
			</field>
				
			
			<field name="c700000006">
				<fieldID>700000006</fieldID>
				<fieldEnglishname>BaseCreateDate</fieldEnglishname>
				<fieldChinesename>建单时间</fieldChinesename>
				<fieldType>7</fieldType>
				<fieldDisplaytype>7</fieldDisplaytype>
				<fieldDisplaytypeValue></fieldDisplaytypeValue>
				<fieldDefaultValue></fieldDefaultValue>
			</field>		
			<field name="C700000103">
				<fieldID>700000103</fieldID><!--查询字段ID-->
				<fieldEnglishname>BaseCreatorDep</fieldEnglishname><!--查询字段英文名，该英文名会做为我们查询条件-->
				<fieldChinesename>建单人部门</fieldChinesename><!--查询字段用于在界面显示的名称-->
				<fieldType>4</fieldType><!--查询字段的数据类型(4：字符等，与Remedy类型保持一致)-->
				<fieldDisplaytype>23</fieldDisplaytype><!--查询字段用于在界面显示的类型(4：字符/TEXT等，与Remedy类型保持一致)-->
				<fieldDisplaytypeValue></fieldDisplaytypeValue><!--查询字段用于在界面显示的值的范围(只有当是Select时有值：格式为"值+冒号+显示值+分号，"如：0:是;1:否;';)-->
				<fieldDefaultValue></fieldDefaultValue><!--查询字段用于在界面显示时的默认值-->
			</field>
			<field name="C700000014">
				<fieldID>700000014</fieldID><!--查询字段ID-->
				<fieldEnglishname>BaseItems</fieldEnglishname><!--查询字段英文名，该英文名会做为我们查询条件-->
				<fieldChinesename>网络分类</fieldChinesename><!--查询字段用于在界面显示的名称-->
				<fieldType>6</fieldType><!--查询字段的数据类型(4：字符等，与Remedy类型保持一致)-->
				<fieldDisplaytype>6</fieldDisplaytype><!--查询字段用于在界面显示的类型(4：字符/TEXT等，与Remedy类型保持一致)-->
				<fieldDisplaytypeValue>交换网:交换网;传输网:传输网;业务平台:业务平台;动力设备:动力设备;应急设备:应急设备;数据网:数据网;无线:无线;直放站:直放站;综合:综合;网管:网管;其他:其他;</fieldDisplaytypeValue><!--查询字段用于在界面显示的值的范围(只有当是Select时有值：格式为"值+冒号+显示值+分号，"如：0:是;1:否;';)-->
				<fieldDefaultValue></fieldDefaultValue><!--查询字段用于在界面显示时的默认值-->
			</field>
			<field name="C800020018">
				<fieldID>800020018</fieldID><!--查询字段ID-->
				<fieldEnglishname>INC_NE_Name</fieldEnglishname><!--查询字段英文名，该英文名会做为我们查询条件-->
				<fieldChinesename>网元名称</fieldChinesename><!--查询字段用于在界面显示的名称-->
				<fieldType>4</fieldType><!--查询字段的数据类型(4：字符等，与Remedy类型保持一致)-->
				<fieldDisplaytype>4</fieldDisplaytype><!--查询字段用于在界面显示的类型(4：字符/TEXT等，与Remedy类型保持一致)-->
				<fieldDisplaytypeValue></fieldDisplaytypeValue><!--查询字段用于在界面显示的值的范围(只有当是Select时有值：格式为"值+冒号+显示值+分号，"如：0:是;1:否;';)-->
				<fieldDefaultValue></fieldDefaultValue><!--查询字段用于在界面显示时的默认值-->
			</field>
			<field name="C700000010">
				<fieldID>700000010</fieldID><!--查询字段ID-->
				<fieldEnglishname>BaseStatus</fieldEnglishname><!--查询字段英文名，该英文名会做为我们查询条件-->
				<fieldChinesename>工单状态</fieldChinesename><!--查询字段用于在界面显示的名称-->
				<fieldType>6</fieldType><!--查询字段的数据类型(4：字符等，与Remedy类型保持一致)-->
				<fieldDisplaytype>6</fieldDisplaytype><!--查询字段用于在界面显示的类型(4：字符/TEXT等，与Remedy类型保持一致)-->
				<fieldDisplaytypeValue>草稿:草稿;一级处理中:一级处理中;二级处理中:二级处理中;三级处理中:三级处理中;待归档:待归档;已归档:已归档;</fieldDisplaytypeValue><!--查询字段用于在界面显示的值的范围(只有当是Select时有值：格式为"值+冒号+显示值+分号，"如：0:是;1:否;';)-->
				<fieldDefaultValue></fieldDefaultValue><!--查询字段用于在界面显示时的默认值-->
			</field>
			<field name="C800020022">
				<fieldID>800020022</fieldID><!--查询字段ID-->
				<fieldEnglishname>INC_City</fieldEnglishname><!--查询字段英文名，该英文名会做为我们查询条件-->
				<fieldChinesename>故障地市</fieldChinesename><!--查询字段用于在界面显示的名称-->
				<fieldType>6</fieldType><!--查询字段的数据类型(4：字符等，与Remedy类型保持一致)-->
				<fieldDisplaytype>6</fieldDisplaytype><!--查询字段用于在界面显示的类型(4：字符/TEXT等，与Remedy类型保持一致)-->
				<fieldDisplaytypeValue>保定市:保定市;唐山市:唐山市;廊坊市:廊坊市;张家口市:张家口市;承德市:承德市;沧州市:沧州市;省公司:省公司;石家庄市:石家庄市;秦皇岛市:秦皇岛市;衡水市:衡水市;邢台市:邢台市;邯郸市:邯郸市</fieldDisplaytypeValue><!--查询字段用于在界面显示的值的范围(只有当是Select时有值：格式为"值+冒号+显示值+分号，"如：0:是;1:否;';)-->
				<fieldDefaultValue></fieldDefaultValue><!--查询字段用于在界面显示时的默认值-->
			</field>
		
			<field name="C800020017">
				<fieldID>800020017</fieldID><!--查询字段ID-->
				<fieldEnglishname>INC_EquipmentManufacturer</fieldEnglishname><!--查询字段英文名，该英文名会做为我们查询条件-->
				<fieldChinesename>故障设备厂商</fieldChinesename><!--查询字段用于在界面显示的名称-->
				<fieldType>4</fieldType><!--查询字段的数据类型(4：字符等，与Remedy类型保持一致)-->
				<fieldDisplaytype>4</fieldDisplaytype><!--查询字段用于在界面显示的类型(4：字符/TEXT等，与Remedy类型保持一致)-->
				<fieldDisplaytypeValue></fieldDisplaytypeValue><!--查询字段用于在界面显示的值的范围(只有当是Select时有值：格式为"值+冒号+显示值+分号，"如：0:是;1:否;';)-->
				<fieldDefaultValue></fieldDefaultValue><!--查询字段用于在界面显示时的默认值-->
			</field>
			<field name="C800020016">
				<fieldID>800020016</fieldID><!--查询字段ID-->
				<fieldEnglishname>INC_EquipmentType</fieldEnglishname><!--查询字段英文名，该英文名会做为我们查询条件-->
				<fieldChinesename>故障设备类型</fieldChinesename><!--查询字段用于在界面显示的名称-->
				<fieldType>4</fieldType><!--查询字段的数据类型(4：字符等，与Remedy类型保持一致)-->
				<fieldDisplaytype>4</fieldDisplaytype><!--查询字段用于在界面显示的类型(4：字符/TEXT等，与Remedy类型保持一致)-->
				<fieldDisplaytypeValue></fieldDisplaytypeValue><!--查询字段用于在界面显示的值的范围(只有当是Select时有值：格式为"值+冒号+显示值+分号，"如：0:是;1:否;';)-->
				<fieldDefaultValue></fieldDefaultValue><!--查询字段用于在界面显示时的默认值-->
			</field>
			<field name="c800020005">
				<fieldID>800020005</fieldID>
				<fieldEnglishname>INC_Alarm_SN</fieldEnglishname>
				<fieldChinesename>告警流水号</fieldChinesename>
				<fieldType>4</fieldType>
				<fieldDisplaytype>4</fieldDisplaytype>
				<fieldDisplaytypeValue></fieldDisplaytypeValue>
				<fieldDefaultValue></fieldDefaultValue>
			</field>
			<field name="c800020027">
				<fieldID>800020027</fieldID>
				<fieldEnglishname>AlarmLevel</fieldEnglishname>
				<fieldChinesename>告警级别</fieldChinesename>
				<fieldType>4</fieldType>
				<fieldDisplaytype>4</fieldDisplaytype>
				<fieldDisplaytypeValue></fieldDisplaytypeValue>
				<fieldDefaultValue></fieldDefaultValue>
			</field>
			<field name="C700000018">
				<fieldID>700000018</fieldID><!--查询字段ID-->
				<fieldEnglishname>BaseDealOutTime</fieldEnglishname><!--查询字段英文名，该英文名会做为我们查询条件-->
				<fieldChinesename>处理时限</fieldChinesename><!--查询字段用于在界面显示的名称-->
				<fieldType>7</fieldType><!--查询字段的数据类型(4：字符等，与Remedy类型保持一致)-->
				<fieldDisplaytype>7</fieldDisplaytype><!--查询字段用于在界面显示的类型(4：字符/TEXT等，与Remedy类型保持一致)-->
				<fieldDisplaytypeValue></fieldDisplaytypeValue><!--查询字段用于在界面显示的值的范围(只有当是Select时有值：格式为"值+冒号+显示值+分号，"如：0:是;1:否;';)-->
				<fieldDefaultValue></fieldDefaultValue><!--查询字段用于在界面显示时的默认值-->
			</field>
		</PageQueryField>
	</sqlquery>
</sql-group>
