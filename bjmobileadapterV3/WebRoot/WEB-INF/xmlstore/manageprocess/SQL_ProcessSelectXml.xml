<?xml version="1.0" encoding="UTF-8"?>
<sql-group>
	<doc>
		<author>黄维</author> 
		<date>2008-10-12</date> 
		<description>对Process的查询</description> 		
	</doc>
	<sqlquery name="BaseProcess.BaseOn_OneBaseSelect">
		<select>
		<![CDATA[ 
   			 select 
              /*COUNT*/
   			 * 
              /*COUNT*/
   			 from 
			  (select 
					C1			as	ProcessID,
					C700020083	as	ActionName,
					C700020090	as	ActionPageID,
					C700020089	as	ActionPageName,
					C700020005	as	Assginee,
					C700020006	as	AssgineeID,
					C700020101	as	AssigneeCorp,
					C700020102	as	AssigneeCorpID,
					C700020105	as	AssigneeDN,
					C700020106	as	AssigneeDNID,
					C700020103	as	AssigneeDep,
					C700020104	as	AssigneeDepID,
					C700000057	as	BaseOpenDateTime,
					C700020061	as	BaseStateCode,
					C700020062	as	BaseStateName,
					C700020016	as	BgDate,
					C700020050	as	CloseBaseSamenessGroup,
					C700020051	as	CloseBaseSamenessGroupID,
					C700020047	as	Commissioner,
					C700020048	as	CommissionerID,
					C700020045	as	CreateByUserID,
					C700020009	as	Dealer,
					C700020111	as	DealerCorp,
					C700020112	as	DealerCorpID,
					C700020115	as	DealerDN,
					C700020116	as	DealerDNID,
					C700020113	as	DealerDep,
					C700020114	as	DealerDepID,
					C700020010	as	DealerID,
					C700020018	as	ProDesc,
					C700020017	as	EdDate,
					C700020065	as	EdProcessAction,
					C700020023	as	Flag01Assign,
					C700020024	as	Flag02Copy,
					C700020025	as	Flag03Assist,
					C700020026	as	Flag04Transfer,
					C700020030	as	Flag08Cancel,
					C700020032	as	Flag15ToAuditing,
					C700020091	as	Flag16ToAssistAuditing,
					C700020033	as	Flag20SideBySide,
					C700020046	as	Flag22IsSelect,
					C700020053	as	Flag33IsEndPhase,
					C700020077	as	Flag34IsEndDuplicated,
					C700020082	as	Flag36IsCreateBase,
					C700020088	as	Flag3IsCanCreateBase,
					C700020020	as	FlagActive,
					C700020074	as	FlagAssignGroupOrUser,
					C700020072	as	FlagBegin,
					C700020022	as	FlagDuplicated,
					C700020073	as	FlagEnd,
					C700020021	as	FlagPredefined,
					C700020070	as	FlagStart,
					C700020019	as	FlagType,
					C700020007	as	ProGroup,
					C700020008	as	GroupID,
					C700020003	as	PhaseNo,
					C700020081	as	PhaseNoTakeMeActive,
					C700020511	as	PosX,
					C700020512	as	PosY,
					C700020004	as	PrevPhaseNo,
					C700020001	as	ProcessBaseID,
					C700020002	as	ProcessBaseSchema,
					C700020057	as	ProcessFlag00IsAvail,
					C700020011	as	ProcessStatus,
					C700020043	as	ProcessType,
					C700020085	as	RoleName,
					C700020084	as	RoleOnlyID,
					C700020015	as	StDate,
					C700020063	as	StProcessAction,
					C700020012	as	AssignOverTimeDate,
					C700020013	as	AcceptOverTimeDate,
					C700020014	as	DealOverTimeDate,
					null		as	AuditingOverTimeDate
              from {WF:App_DealProcess} DealProcess
			  where $BaseOn_OneBase$
			union all
   			  select 
					C1			as	ProcessID,
					C700020083	as	ActionName,
					C700020090	as	ActionPageID,
					C700020089	as	ActionPageName,
					C700020005	as	Assginee,
					C700020006	as	AssgineeID,
					C700020101	as	AssigneeCorp,
					C700020102	as	AssigneeCorpID,
					C700020105	as	AssigneeDN,
					C700020106	as	AssigneeDNID,
					C700020103	as	AssigneeDep,
					C700020104	as	AssigneeDepID,
					C700000057	as	BaseOpenDateTime,
					C700020061	as	BaseStateCode,
					C700020062	as	BaseStateName,
					C700020016	as	BgDate,
					C700020050	as	CloseBaseSamenessGroup,
					C700020051	as	CloseBaseSamenessGroupID,
					C700020047	as	Commissioner,
					C700020048	as	CommissionerID,
					C700020045	as	CreateByUserID,
					C700020009	as	Dealer,
					C700020111	as	DealerCorp,
					C700020112	as	DealerCorpID,
					C700020115	as	DealerDN,
					C700020116	as	DealerDNID,
					C700020113	as	DealerDep,
					C700020114	as	DealerDepID,
					C700020010	as	DealerID,
					C700020018	as	ProDesc,
					C700020017	as	EdDate,
					C700020065	as	EdProcessAction,
					C700020023	as	Flag01Assign,
					C700020024	as	Flag02Copy,
					C700020025	as	Flag03Assist,
					C700020026	as	Flag04Transfer,
					C700020030	as	Flag08Cancel,
					C700020032	as	Flag15ToAuditing,
					C700020091	as	Flag16ToAssistAuditing,
					C700020033	as	Flag20SideBySide,
					C700020046	as	Flag22IsSelect,
					C700020053	as	Flag33IsEndPhase,
					C700020077	as	Flag34IsEndDuplicated,
					C700020082	as	Flag36IsCreateBase,
					C700020088	as	Flag3IsCanCreateBase,
					C700020020	as	FlagActive,
					C700020074	as	FlagAssignGroupOrUser,
					C700020072	as	FlagBegin,
					C700020022	as	FlagDuplicated,
					C700020073	as	FlagEnd,
					C700020021	as	FlagPredefined,
					C700020070	as	FlagStart,
					C700020019	as	FlagType,
					C700020007	as	ProGroup,
					C700020008	as	GroupID,
					C700020003	as	PhaseNo,
					C700020081	as	PhaseNoTakeMeActive,
					C700020511	as	PosX,
					C700020512	as	PosY,
					C700020004	as	PrevPhaseNo,
					C700020001	as	ProcessBaseID,
					C700020002	as	ProcessBaseSchema,
					C700020057	as	ProcessFlag00IsAvail,
					C700020011	as	ProcessStatus,
					C700020043	as	ProcessType,
					C700020085	as	RoleName,
					C700020084	as	RoleOnlyID,
					C700020015	as	StDate,
					C700020063	as	StProcessAction,
					null		as	AssignOverTimeDate,
					null		as	AcceptOverTimeDate,
					null		as	DealOverTimeDate,
					C700020037	as	AuditingOverTimeDate
              from {WF:App_AuditingProcess} AuditingProcess
			  where $BaseOn_OneBase$ 
			  ) Process $extend$
		  ]]> 
		</select>
		<customwhere>
			<parameterMap prepend="" name="BaseOn_OneBase">
				<mapingFiled  prepend="" fieldName="is_notnull"  fieldType="4">
					<mapsql value="isnotnull">
						<![CDATA[
							 1=#is_notnull#
						 ]]>  			
					</mapsql>
				</mapingFiled>			
				<mapingFiled  prepend="AND" fieldName="baseschema"  fieldType="4">
					<mapsql value="isnotnull">
						<![CDATA[
							 C700020002 = '#baseschema#'
						 ]]>  			
					</mapsql>
				</mapingFiled>
				<mapingFiled  prepend="AND" fieldName="baseid"  fieldType="4">
					<mapsql value="isnotnull">
						<![CDATA[
							 C700020001 = '#baseid#'
						 ]]>  			
					</mapsql>
				</mapingFiled>
				<mapingFiled  prepend="and" fieldName="processid"  fieldType="4">
					<mapsql value="isnotnull">
						<![CDATA[
							 C1='#processid#'
						 ]]>  			
					</mapsql>
				</mapingFiled>
				<mapingFiled  prepend="and" fieldName="processtype"  fieldType="4">
					<mapsql value="isnotnull">
						<![CDATA[
							 C700020043='#processtype#'
						 ]]>  			
					</mapsql>
				</mapingFiled>				
			</parameterMap>		
			<parameterMap prepend="EXTEND" name="extend">
					<mapingFiled  prepend="EXTEND" fieldName="orderby"  fieldType="4">
						<mapsql value="isnotnull">
							<![CDATA[
								   order by #orderby#
							 ]]>
						</mapsql>
					</mapingFiled>
			</parameterMap>				
		</customwhere>
	</sqlquery>
	
	<sqlquery name="BaseProcess.BaseOn_OneExpansionsqlSelect">
		<select>
		<![CDATA[ 
   			 select 
				C1			as	ProcessID,
				C700020043	as	ProcessType
              from $formname$ Process
			  where $extend$
		  ]]> 
		</select>
		<customwhere>	
			<parameterMap prepend="EXTEND" name="extend">
					<mapingFiled  prepend="EXTEND" fieldName="expansionsql"  fieldType="4">
						<mapsql value="isnotnull">
							<![CDATA[
								   #expansionsql#
							 ]]>
						</mapsql>
					</mapingFiled>
			</parameterMap>

			<parameterMap prepend="EXTEND" name="formname">
					<mapingFiled  prepend="EXTEND" fieldName="processschema"  fieldType="4">
						<mapsql value="isnotnull">
							<![CDATA[
								 {#processschema#}
							 ]]>  			
						</mapsql>
					</mapingFiled>
			</parameterMap>

		</customwhere>
	</sqlquery>	
</sql-group>
